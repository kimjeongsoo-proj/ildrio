<!doctype html> 
<html lang="ko" layout:decorator="~{../layout/AdminLayoutPopup.html}" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" xmlns:th="http://www.thymeleaf.org"> 
<th:block layout:fragment="customCss"> 
 
</th:block> 
 
<th:block layout:fragment="pageTitleEntry"> 
 
</th:block> 
 
<th:block layout:fragment="pageContentsEntry"> 
	<div style="padding:0px 30px 30px 30px;">  
	<div class="app-page-title">  
  	<div class="page-title-wrapper">  
    		<div class="page-title-heading">  
    			<div class="page-title-icon">  
    				<i class="linearicons-pencil5 text-success"></i>  
    			</div>  
    			<div>  
    				<span class="span_page_title"> 
    					<b>임금지불 등록 & 수정 </b> 
    				</span>  
    				<div class="page-title-subheading">임금지불 등록 & 수정</div> 
    			</div>  
    		</div>  
    		<div class="page-title-actions">  
    		</div>  
  	</div> 
	</div> 
	<form name="inputForm" id="inputForm" method="post">    
  	<input type="hidden" name="trxnMode" id="trxnMode">   
  	<a name="bookmark_1" id="bookmark_1"></a>   
  	<div class="card">   
    		<div class="card-header">   
        		<h5><b> 임금지불</b></h5>  
    		</div>   
    		<div clase="card-body" style="padding: 20px;">   
      		<div class="mb-3 row">   
                	<label for="jobNo" class="col-sm-2 col-form-label text-end"> 채용번호</label>   
            		<div class="col-sm-10">   
                    <input type="text"  name="jobNo" id="jobNo" th:value="${rsModel.jobNo}"  class="form-control"   maxlength="80"> 
            		</div>   
      		</div>   
      		<div class="mb-3 row">   
                	<label for="memberNo" class="col-sm-2 col-form-label text-end"> 회원번호</label>   
            		<div class="col-sm-10">   
                    <input type="text"  name="memberNo" id="memberNo" th:value="${rsModel.memberNo}"  class="form-control"   maxlength="80"> 
            		</div>   
      		</div>   
      		<div class="mb-3 row">   
                	<label for="paymentBaseDate" class="col-sm-2 col-form-label text-end"> 지불기준일자</label>   
            		<div class="col-sm-10">   
                    <input type="text"  name="paymentBaseDate" id="paymentBaseDate" th:value="${rsModel.paymentBaseDate}"  class="form-control"   maxlength="40"> 
            		</div>   
      		</div>   
      		<div class="mb-3 row">   
                	<label for="workStartDate" class="col-sm-2 col-form-label text-end"> 근무시작일자</label>   
            		<div class="col-sm-10">   
                    <input type="text"  name="workStartDate" id="workStartDate" th:value="${rsModel.workStartDate}"  class="form-control"   maxlength="40"> 
            		</div>   
      		</div>   
      		<div class="mb-3 row">   
                	<label for="dailyWorkWage" class="col-sm-2 col-form-label text-end"> 일당</label>   
            		<div class="col-sm-10">   
                    <input type="text"  name="dailyWorkWage" id="dailyWorkWage" th:value="${rsModel.dailyWorkWage}"  class="form-control"   maxlength="100"> 
            		</div>   
      		</div>   
      		<div class="mb-3 row">   
                	<label for="dailyCommison" class="col-sm-2 col-form-label text-end"> 수수료</label>   
            		<div class="col-sm-10">   
                    <input type="text"  name="dailyCommison" id="dailyCommison" th:value="${rsModel.dailyCommison}"  class="form-control"   maxlength="100"> 
            		</div>   
      		</div>   
      		<div class="mb-3 row">   
                	<label for="dailyRequestWage" class="col-sm-2 col-form-label text-end"> 요청임금</label>   
            		<div class="col-sm-10">   
                    <input type="text"  name="dailyRequestWage" id="dailyRequestWage" th:value="${rsModel.dailyRequestWage}"  class="form-control"   maxlength="100"> 
            		</div>   
      		</div>   
      		<div class="mb-3 row">   
                	<label for="workDayCount" class="col-sm-2 col-form-label text-end"> 근무일수</label>   
            		<div class="col-sm-10">   
                    <input type="text"  name="workDayCount" id="workDayCount" th:value="${rsModel.workDayCount}"  class="form-control"   maxlength="100"> 
            		</div>   
      		</div>   
      		<div class="mb-3 row">   
                	<label for="paymentAmount" class="col-sm-2 col-form-label text-end"> 지불금액</label>   
            		<div class="col-sm-10">   
                    <input type="text"  name="paymentAmount" id="paymentAmount" th:value="${rsModel.paymentAmount}"  class="form-control"   maxlength="100"> 
            		</div>   
      		</div>   
      		<div class="mb-3 row">   
                	<label for="taxAmount" class="col-sm-2 col-form-label text-end"> 세금금액</label>   
            		<div class="col-sm-10">   
                    <input type="text"  name="taxAmount" id="taxAmount" th:value="${rsModel.taxAmount}"  class="form-control"   maxlength="100"> 
            		</div>   
      		</div>   
      		<div class="mb-3 row">   
                	<label for="taxMemo" class="col-sm-2 col-form-label text-end"> 세금메모</label>   
            		<div class="col-sm-10">   
                    <input type="text"  name="taxMemo" id="taxMemo" th:value="${rsModel.taxMemo}"  class="form-control"   maxlength="4000"> 
            		</div>   
      		</div>   
      		<div class="mb-3 row">   
                	<label for="paymentDate" class="col-sm-2 col-form-label text-end"> 지불일자</label>   
            		<div class="col-sm-10">   
                    <input type="text"  name="paymentDate" id="paymentDate" th:value="${rsModel.paymentDate}"  class="form-control"   maxlength="40"> 
            		</div>   
      		</div>   
      		<div class="mb-3 row">   
                	<label for="paymentStatus" class="col-sm-2 col-form-label text-end"> 지불상태</label>   
            		<div class="col-sm-10">   
                    <input type="text"  name="paymentStatus" id="paymentStatus" th:value="${rsModel.paymentStatus}"  class="form-control"   maxlength="80"> 
            		</div>   
      		</div>   
      		<div class="mb-3 row">   
                	<label for="bankName" class="col-sm-2 col-form-label text-end"> 은행명</label>   
            		<div class="col-sm-10">   
                    <input type="text"  name="bankName" id="bankName" th:value="${rsModel.bankName}"  class="form-control"   maxlength="80"> 
            		</div>   
      		</div>   
      		<div class="mb-3 row">   
                	<label for="bankAccountNo" class="col-sm-2 col-form-label text-end"> 계좌번호</label>   
            		<div class="col-sm-10">   
                    <input type="text"  name="bankAccountNo" id="bankAccountNo" th:value="${rsModel.bankAccountNo}"  class="form-control"   maxlength="80"> 
            		</div>   
      		</div>   
      		<div class="mb-3 row">   
                	<label for="bankAccountName" class="col-sm-2 col-form-label text-end"> 계좌명</label>   
            		<div class="col-sm-10">   
                    <input type="text"  name="bankAccountName" id="bankAccountName" th:value="${rsModel.bankAccountName}"  class="form-control"   maxlength="200"> 
            		</div>   
      		</div>   
      		<div class="mb-3 row">   
                	<label for="insertDatetime" class="col-sm-2 col-form-label text-end"> 입력일시</label>   
            		<div class="col-sm-10">   
                    <input type="text"  name="insertDatetime" id="insertDatetime" th:value="${rsModel.insertDatetime}"  class="form-control"   maxlength="100"> 
            		</div>   
      		</div>   
      		<div class="mb-3 row">   
                	<label for="updateDatetime" class="col-sm-2 col-form-label text-end"> 수정일시</label>   
            		<div class="col-sm-10">   
                    <input type="text"  name="updateDatetime" id="updateDatetime" th:value="${rsModel.updateDatetime}"  class="form-control"   maxlength="100"> 
            		</div>   
      		</div>   
      	</div> 
  	</div>  
	</form> 
	</div>  
</th:block> 
<th:block layout:fragment="customModal"> 
</th:block> 
<th:block layout:fragment="customScript"> 
<!-- -------------------------------------------- -->   
<script type="text/javascript">   
  $(document).ready(function() {   
   
   
    fn_modalButton();   
  });   
   
    
  // 버튼 처리    
	function fn_modalButton(){   
		var src = '';   
		src += '<a onclick="modal_resize_iframe.cfn_bookmark(\'bookmark_1\');" class="btn btn-outline-secondary">북마크 1</a> ';    
   
		if ("[[${rsModel.trxnMode}]]" == "insert") {   
			src += '<a onclick="modal_resize_iframe.fn_trxn(\'insert\');"  class="btn btn-primary">등록</a> ';   
		} else {   
			src += '<a onclick="modal_resize_iframe.fn_trxn(\'update\');"  class="btn btn-primary">수정</a> ';   
			src += '<a onclick="modal_resize_iframe.fn_trxn(\'delete\');"  class="btn btn-danger" id="modal_close">삭제</a> ';   
		}   
		src += '<a  class="btn btn-secondary" data-bs-dismiss="modal">닫기</a>';   
		$("#modal_resize_button",parent.document).html(src);   
	}   
    
  // 등록 처리   
  function fn_trxn(vTrxnMode) {   
   
		if (vTrxnMode == "delete") { 
			if (confirm("자료를 삭제 하시갰습니까?") == false) { 
				return false; 
			} 
		} 
    	$("#trxnMode").val(vTrxnMode);    
   
    	if (fn_chkForm() == false) {   
      	return false;   
    	}   
   
   
    $.ajax({   
      url : '/employmentPayment/employmentPaymentTrxn',   
      type : 'post',   
      data : $(document.inputForm).serialize(),   
      dataType : 'json',  
      async : true,  
      success : function(data) {  
        if (data.rsMsg == "FAIL") {   
          alert("실패하였습니다.");   
        } else {   
          if (data.rsMsg == "DUPLICATE") {  
            alert("이미 등록된 자료가 있습니다..");   
          } else {   
			  alert(data.rsMsg); 
            parent.fn_employmentPayment_list();   
			  if (vTrxnMode != "update") { 
            	 	parent.pfn_modalClose();   
            }   
          }   
        }   
      }   
    });   
   
  }  
    
  // 입력 필수 항목 체크   
  function fn_chkForm() {   
   
    if (cfn_isValid_Currency("일당" ,$("#dailyWorkWage").val(),1,20) == false) {  
      $("#dailyWorkWage").focus();  
      return false;  
    }  
    if (cfn_isValid_Currency("수수료" ,$("#dailyCommison").val(),1,20) == false) {  
      $("#dailyCommison").focus();  
      return false;  
    }  
    if (cfn_isValid_Currency("요청임금" ,$("#dailyRequestWage").val(),1,20) == false) {  
      $("#dailyRequestWage").focus();  
      return false;  
    }  
    if (cfn_isValid_Currency("근무일수" ,$("#workDayCount").val(),1,20) == false) {  
      $("#workDayCount").focus();  
      return false;  
    }  
    if (cfn_isValid_Currency("지불금액" ,$("#paymentAmount").val(),1,20) == false) {  
      $("#paymentAmount").focus();  
      return false;  
    }  
    if (cfn_isValid_Currency("세금금액" ,$("#taxAmount").val(),1,20) == false) {  
      $("#taxAmount").focus();  
      return false;  
    }  
    return true;  
  } 
</script> 
</th:block> 